<?xml version="1.0"?>
<launch>	
<group>

  <arg name="ackermann_wheelbase" default="2.8498"/>
  <arg name="ackermann_track"     default="1.6002"/>
  <arg name="steering_ratio"      default="16.0"/>  

  <!-- Vehicle Interface -->
  <group ns="vehicle" >
  <!-- CAN Bus Hardware -->
  <node ns="can_bus_mks" pkg="kvaser_can_usb" type="can_listener" name="can_node" output="log"> 
    <param name="channel_no" value="0" />    
    <param name="bitrate" value="-2" /> <!-- BAUD_500K     (-2) -->    
  </node>

    <node pkg="mks_can" type="mks_node" name="mks_node" output="screen">
      <remap from="can_raw" to="can_bus_mks/can_raw"/>            
      <param name="ackermann_wheelbase" value="$(arg ackermann_wheelbase)" />
      <param name="ackermann_track" value="$(arg ackermann_track)" />
      <param name="steering_ratio" value="$(arg steering_ratio)" />
    </node>    
  </group>


<!--   <node pkg="kvaser_can_usb" type="can_listener" name="can_listener" />-->

<!--   <node pkg="mks_can" type="mks_node" name="mks_node" /> -->

   
       <arg name="frame_id" default="mks/velodyne"/>

    <!-- Microstain sensor node -->
    <!-- For setting debug level to debug -->

    <env name="ROSCONSOLE_CONFIG_FILE"  value="$(find microstrain_3dm_gx5_45)/config/custom_rosconsole.conf"/>
    <node name="microstrain_3dm_gx5_45_node" pkg="microstrain_3dm_gx5_45" type="microstrain_3dm_gx5_45_node" output="screen">
        <param name="port" value="/dev/ttyACM0" type="str" />
        <param name="baudrate" value="115200" type="int" />
        <param name="device_setup" value="true" type="bool" />
        <param name="readback_settings" value="true" type="bool" />
        <param name="save_settings" value="true" type="bool" />
        <param name="auto_init" value="true" type="bool" />
        <param name="gps_rate" value="4" type="int" />
        <param name="imu_rate" value="100" type="int" />
        <param name="nav_rate" value="10" type="int" />
        <param name="dynamics_mode" value="1" type="int" />
        <param name="declination_source" value="2" type="int" />
        <param name="declination" value="0.23" type="double" />    
        <param name="gps_frame_id" value="wgs84" type="str" />
        <param name="imu_frame_id" value="base_link" type="str"/>
        <param name="odom_frame_id" value="wgs84" type="str" />
        <param name="odom_child_frame_id" value="base_link" type="str" />
        <param name="publish_gps" value="true" type="bool" />
        <param name="publish_imu" value="true" type="bool" />
        <param name="publish_odom" value="true" type="bool" />    
    </node>    
	<!-- DGPS node -->
    <!--
	<node name="nmea_topic_serial_reader" pkg="nmea_navsat_driver" type="nmea_topic_serial_reader">
		<param name="port" value="/dev/ttyUSB0" />
		<param name="baud" value="9600" />
	</node>    
    -->
    <!--
	<node name="nmea_topic_bestpos_serial_reader" pkg="nmea_navsat_driver" type="nmea_topic_bestpos_serial_reader">
		<param name="port" value="/dev/ttyUSB0" />
		<param name="baud" value="9600" />
	</node>    
    -->
	
    <node name="nmea_topic_serial_reader" pkg="nmea_navsat_driver" type="nmea_topic_serial_reader">
		<param name="port" value="/dev/ttyUSB0" />
		<param name="baud" value="9600" />
	</node>
	<node name="nmea_topic_driver" pkg="nmea_navsat_driver" type="nmea_topic_driver"/>		
    
	<!-- camera node -->
	<node name="usb_cam1" pkg="usb_cam" type="usb_cam_node" output="screen" >
    	<param name="topic_name" value="image_front_left" />
		<param name="framerate" value="30" />
    	<param name="video_device" value="/dev/video0" />
    	<param name="image_width" value="1280" />
    	<param name="image_height" value="720" />
    	<param name="pixel_format" value="mjpeg" />
        <param name="autoexposure" value="true" />
    	<param name="camera_frame_id" value="image1" />
    	<param name="io_method" value="mmap"/>
    </node>
    <node name="usb_cam2" pkg="usb_cam" type="usb_cam_node" output="screen" >
    	<param name="topic_name" value="image_front_right" />
	    <param name="framerate" value="30" />
    	<param name="video_device" value="/dev/video1" />
    	<param name="image_width" value="1280" />
    	<param name="image_height" value="720" />
    	<param name="pixel_format" value="mjpeg" />
        <param name="autoexposure" value="true" />
    	<param name="camera_frame_id" value="image2" />
    	<param name="io_method" value="mmap"/>
    </node>
    <node name="usb_cam3" pkg="usb_cam" type="usb_cam_node" output="screen" >
    	<param name="topic_name" value="image_rear_left" />
    	<param name="framerate" value="30" />
	    <param name="video_device" value="/dev/video2" />
    	<param name="image_width" value="1280" />
    	<param name="image_height" value="720" />
    	<param name="pixel_format" value="mjpeg" />
        <param name="autoexposure" value="true" />
    	<param name="camera_frame_id" value="image3" />
    	<param name="io_method" value="mmap"/>
    </node>
    <node name="usb_cam4" pkg="usb_cam" type="usb_cam_node" output="screen" >
    	<param name="topic_name" value="image_rear_right" />
    	<param name="framerate" value="30" />
	    <param name="video_device" value="/dev/video3" />
    	<param name="image_width" value="1280" />
    	<param name="image_height" value="720" />
    	<param name="pixel_format" value="mjpeg" />
        <param name="autoexposure" value="true" />
    	<param name="camera_frame_id" value="image4" />
    	<param name="io_method" value="mmap"/>
    </node>
    <node name="usb_cam5" pkg="usb_cam" type="usb_cam_node" output="screen" >
    	<param name="topic_name" value="image_rear_right" />
    	<param name="framerate" value="30" />
	    <param name="video_device" value="/dev/video4" />
    	<param name="image_width" value="1280" />
    	<param name="image_height" value="720" />
    	<param name="pixel_format" value="mjpeg" />
        <param name="autoexposure" value="true" />
    	<param name="camera_frame_id" value="image5" />
    	<param name="io_method" value="mmap"/>
    </node>	
    <node name="usb_cam6" pkg="usb_cam" type="usb_cam_node" output="screen" >
    	<param name="topic_name" value="image_rear_right" />
    	<param name="framerate" value="30" />
	    <param name="video_device" value="/dev/video5" />
    	<param name="image_width" value="1280" />
    	<param name="image_height" value="720" />
    	<param name="pixel_format" value="mjpeg" />
        <param name="autoexposure" value="true" />
    	<param name="camera_frame_id" value="image6" />
    	<param name="io_method" value="mmap"/>
    </node>
	<node name="usb_cam7" pkg="usb_cam" type="usb_cam_node" output="screen" >
    	<param name="topic_name" value="image_rear_right" />
    	<param name="framerate" value="30" />
	    <param name="video_device" value="/dev/video6" />
    	<param name="image_width" value="1280" />
    	<param name="image_height" value="720" />
    	<param name="pixel_format" value="mjpeg" />
        <param name="autoexposure" value="true" />
    	<param name="camera_frame_id" value="image7" />
    	<param name="io_method" value="mmap"/>
    	<param name="autofocus" value="true"/>
    	<param name="focus" value="0"/>
    </node>
	<node name="usb_cam8" pkg="usb_cam" type="usb_cam_node" output="screen" >
    	<param name="topic_name" value="image_rear_right" />
    	<param name="framerate" value="30" />
	    <param name="video_device" value="/dev/video7" />
    	<param name="image_width" value="1280" />
    	<param name="image_height" value="720" />
    	<param name="pixel_format" value="mjpeg" />
        <param name="autoexposure" value="true" />
    	<param name="camera_frame_id" value="image8" />
    	<param name="io_method" value="mmap"/>
    </node>
    <!--
    -->
    <!--
    <node name="image_view1" pkg="image_view" type="image_view" respawn="false" output="screen">
        <remap from="image" to="/usb_cam1/image_raw_head"/>
        <param name="autosize" value="true" />
    </node>
    <node name="image_view2" pkg="image_view" type="image_view" respawn="false" output="screen">
        <remap from="image" to="/usb_cam2/image_raw_left"/>
        <param name="autosize" value="true" />
    </node>
    <node name="image_view3" pkg="image_view" type="image_view" respawn="false" output="screen">
        <remap from="image" to="/usb_cam3/image_raw_right"/>
        <param name="autosize" value="true" />
    </node>	
    -->
    <!-- Velodyne LiDAR 64E_S2 -->
    <arg name="pcap" default="" />
    <arg name="calibration" default="$(find velodyne_pointcloud)/params/64HDL_S2.yaml"/>
    <include file="/home/bdd/ohashi/run/nodelet_manager_ohashi.launch">
        <arg name="model" value="64E_S2"/>
        <arg name="pcap" value="$(arg pcap)"/>
        <arg name="frame_id" value="$(arg frame_id)"/>
    </include>
    <include file="$(find velodyne_pointcloud)/launch/cloud_nodelet.launch">
        <arg name="calibration" value="$(arg calibration)"/>
    </include>    
    <!-- Diagnostics -->
    <!--
    <node pkg="rqt_topic" type="rqt_topic" name="rqt_topic"/>
    -->
</group>






</launch>
